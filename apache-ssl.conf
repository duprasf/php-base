<IfModule mod_ssl.c>
<VirtualHost *:443>
	ServerName [domain_name]
    ServerAlias *.[domain_name]
	ServerAdmin imsd.web-dsgi@hc-sc.gc.ca
	documentRoot /var/www/html

	<DirectoryMatch /var/www/html>
	    Require all granted
		Options -Indexes
		RewriteEngine On

		RewriteCond %{REQUEST_FILENAME} -s [OR]
		RewriteCond %{REQUEST_FILENAME} -d [OR]
		RewriteCond %{REQUEST_FILENAME} -l
		RewriteRule ^.*$ - [NC,L]
		RewriteRule ^.*$ /index.php [NC,L]
	</DirectoryMatch>

    SSLEngine on

    # Intermediate configuration, tweak to your needs
    SSLProtocol             TLSv1.2
    SSLCipherSuite          ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:!DSS
    #SSLProtocol             TLSv1.3
    #SSLCipherSuite          TLS_AES_256_GCM_SHA384:TLS_AES_128_GCM_SHA256:TLS_AES_128_CCM_SHA256
    SSLHonorCipherOrder     on

    SSLOptions +StrictRequire
    SSLCertificateFile /var/www-certs/[domain_name].crt
    SSLCertificateKeyFile /var/www-certs/[domain_name].key
    #SSLCertificateChainFile /var/www-certs/[domain_name]-chain.crt

    # Header edit Set-Cookie (?i)^(.*)(;\s*secure)??((\s*;)?(.*)) "$1; Secure$3$4"
</VirtualHost>
</IfModule>
